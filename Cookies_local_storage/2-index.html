<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8" />
        <title>Task 3</title>

        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <script src="./src/index.js"></script>
    </head>

    <body>
        <h1>Login to the website</h1>
        <label for="firstname"></label>
        <input type="text" id="firstname" />
        <label for="email"></label>
        <input type="text" id="email" />
        <button type="button" onclick="setCookies();">Log me in</button>

        <h2>Cookies</h2>
        <button type="button" onclick="showCookies();">Show the cookies</button>

        <script>
            function setCookies() {
                let date = new Date();
                date.setTime(date.getTime() + (10 * 24 * 60 * 60 * 1000));
                let expire = "expires=" + date.toUTCString();

                let name = document.getElementById("firstname").value;
                let email = document.getElementById("email").value;


                // Console.log here is to track when the expiration date and time is set
                console.log(expire);

                document.cookie = `firstname=${name}; ${expire}; path=/`;
                document.cookie = `email=${email}; ${expire}; path=/`;
            }

            function showCookies() {
                let newElement = document.createElement("p");
                let firstName = getCookie('firstname');
                let email = getCookie('email');
                
                newElement.innerText = `Email: ${email} - Firstname: ${firstName}`;
                document.body.appendChild(newElement);
            }

            function getCookie(name) {
                let Cookies = document.cookie;
                let cookieArr = Cookies.split(';');
                
                
                for (let i = 0; i < cookieArr.length; i++) {
                    let cookie = cookieArr[i].trim();
                    if (cookie.indexOf(name + "=") === 0) {
                        return cookie.substring(name.length + 1);
                    }
                }

                return null;
            }
        </script>

    </body>


</html>